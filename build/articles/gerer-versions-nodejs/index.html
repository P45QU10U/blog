<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Gérer sa (ou ses) version(s) de NodeJS - Jesmo Drazik Blog
    </title>
    <link rel="alternate" href="http://jesmodrazik.fr/feed.xml" type="application/rss+xml" title="Développeur web pour l'agence de production Wandi">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Anonymous+Pro:400,700,400italic,700italic|Merriweather:400,700,300">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body class="article-detail">
    <header class="header">
      <div class="content-wrap">
        <h1>Gérer sa (ou ses) version(s) de NodeJS</h1>
        <p class="author">Ecrit par <span class="author">Cyrille Jesmo Drazik</span>
        </p>
      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
        <article class="article">
          <section class="content"><p>La sortie de la version 4.0.0 de NodeJS apporte de nombreuses nouvelles
fonctionnalités, il est donc indispensable de faire la mise à jour. Sur Windows,
faire la mise à jour de NodeJS revient à désinstaller la version actuelle,
télécharger l’installeur de la nouvelle version. Sur Ubuntu, utiliser apt-get
est
<a href="http://doc.ubuntu-fr.org/nodejs">plus compliqué qu’il n’y parait</a> pour gérer
son installation de NodeJS. Il fallait donc trouver une solution plus efficace.
Mon choix s’est porté sur
<a href="https://github.com/creationix/nvm">Node.js Version Manager (nvm)</a>.</p>
<p><span class="more"></span></p>
<p><em>Cet article est consacré à nvm qui ne fonctionne que sur Linux. Mais des
outils au fonctionnement similaires existent pour Windows :
<a href="https://github.com/hakobera/nvmw">nvmw</a> et
<a href="https://github.com/coreybutler/nvm-windows">nvm-windows</a>.</em></p>
<h2 id="qu-est-ce-que-c-est-">Qu’est-ce que c’est&nbsp;?</h2>
<p>nvm est un programme permettant de gérer son installation de NodeJS. Il permet
d’installer, de mettre à jour, de désinstaller NodeJS sur votre machine, via une
simple <span class="caps">CLI</span>. L’avantage de cette solution par rapport à une installation via
apt-get, hormis la simplicité, c’est qu’il est possible d’installer plusieurs
versions de NodeJS sur une seule machine, et de switcher de l’une à l’autre
à la volée avec une simple&nbsp;commande.</p>
<h2 id="installer-nvm">Installer&nbsp;nvm</h2>
<p>Pour installer nvm, il y a deux solutions :
<a href="https://github.com/creationix/nvm#install-script">via un script</a> ou
<a href="https://github.com/creationix/nvm#manual-install">manuellement</a>. La
documentation est très claire sur ce point, rien à&nbsp;ajouter.</p>
<h2 id="installer-d-sinstaller-nodejs">Installer/désinstaller&nbsp;NodeJS</h2>
<p>La première étape après avoir installé nvm, c’est de l’utiliser pour installer
NodeJS&nbsp;:</p>
<pre><code>nvm install &lt;version&gt;
</code></pre><p>La version à installer peut être un numéro de version précis (par exemple
<code>0.12.7</code>), ou un mot-clef. <code>stable</code> installera la dernière version stable
publiée, <code>unstable</code> la dernière version publiée, même si celle-ci n’est pas
taggée comme étant&nbsp;stable.</p>
<p>Plusieurs versions peuvent être installée, en lançant plusieurs <code>nvm install</code>.</p>
<p>Pour désinstaller une version précédemment installée, il suffit d’utiliser la
commande <code>nvm uninstall &lt;version&gt;</code>.</p>
<p>Enfin, la commande <code>nvm ls</code> vous permet de voir quelles versions sont installées
sur votre machine. Pour obtenir la liste des versions disponibles, il faut
utiliser <code>nvm ls-remote</code>.</p>
<h2 id="utiliser-une-version-install-e">Utiliser une version&nbsp;installée</h2>
<p>Une fois une ou plusieurs version(s) de NodeJS installée(s), la commande
<code>nvm use &lt;version&gt;</code> permet d’utiliser l’une d’elles dans le shell courrant. En
effet, de base, lors de l’ouverture d’un shell, NodeJS n’est pas disponible
dans celui-ci. Il est toutefois possible de définir une version par défaut qui
sera utilisée automatiquement lors de l’ouverture d’un nouveau shell, avec la
commande suivante&nbsp;:</p>
<pre><code>nvm alias default &lt;version&gt;
</code></pre><p>Il est aussi possible d’exécuter une seule commande en utilisant une version
donnée. Pour cela, il y a deux solutions. La première permet d’exécuter
directement un fichier ou une commande avec une version précise&nbsp;:</p>
<pre><code>nvm run &lt;version&gt; &lt;fichier&gt;
nvm run 4.1.2 app.js
</code></pre><p>La seconde permet d’exécuter une commande avec la variable <span class="caps">PATH</span> pointant vers
la version de NodeJS spécifiée&nbsp;:</p>
<pre><code>nvm exec &lt;version&gt; &lt;commande&gt;
nvm exec 4.1.2 node app.js
</code></pre><h2 id="conclusion">Conclusion</h2>
<p>nvm nous permet donc de gérer très simplement l’installation, la mise à jour et
l’utilisation de NodeJS. Un avantage majeur de cette solution est de pouvoir
installer plusieurs versions et d’en utiliser une à un moment donné. J’ai exposé
ici les fonctionnalités les plus couramment utiles. Pour les cas d’utilisation
plus rares et poussés,
<a href="https://github.com/creationix/nvm#node-version-manager-">la documentation</a> est
très&nbsp;complète.</p>
</section>
        </article>
        <div class="share"><a href="https://twitter.com/share?text=Gérer sa (ou ses) version(s) de NodeJS&amp;url=http://jesmodrazik.fr/articles/gerer-versions-nodejs/&amp;via=JesmoDrazik" target="social">Partager sur Twitter</a></div>
      </div>
    </div>
    <footer>
      <div class="content-wrap">
        <div class="nav"><a href="/">« Revenir à la liste des articles</a></div>
        <section class="about">
        </section>
        <section class="copy">
          <p>&copy; 2015 Cyrille Perois &mdash; powered by&nbsp;<a href="https://github.com/jnordberg/wintersmith">Wintersmith</a>
          </p>
        </section>
      </div>
    </footer>
  </body>
</html>